config:
  credentials_id: clouduser

remote_groups:
  r_group_1:
    - name: node01
      host: ajitsahu1c.mylabserver.com
    - name: node02
      host: ajitsahu2c.mylabserver.com
  r_group_2:
    - name: node03
      host: ajitsahu3c.mylabserver.com
    - name: node04
      host: ajitsahu4c.mylabserver.com
command_groups:
  c_group_1:
    - commands:
        - 'ls -lrt'
        - 'test -d /usr/local/jenkins || mkdir -p /usr/local/jenkins'
        - 'chown cloud_user /usr/local/jenkins'
  c_group_2:
    - puts:
        - from: 'test.sh'
          into: '/usr/local/jenkins'
steps:
  deploy:
    - remote_groups:
        - r_group_1
      command_groups:
        - c_group_1
        - c_group_2
    - remote_groups:
        - r_group_2
      command_groups:
        - c_group_1
        - c_group_2
